<link rel="import" href="../../bower_components/core-shared-lib/core-shared-lib.html">
<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">


<polymer-element name="synonym-list">
    <template>
        <input type="text" value="{{word}}">
        <paper-button raised on-click="{{search}}">Search</paper-button><br>
        <br>
        <br>
        <div id="resultOutput">{{resultSynonyme}}</div>

        <core-shared-lib
                id="ajax"
                auto
                callbackName = this.handleResponse>
        </core-shared-lib>
    </template>
    <script>
        function handleResponse(result){
            var synonyms = "";
            for (var synsetCount = 0; synsetCount < result.synsets.length; synsetCount++) {
                for (var termCount = 0; termCount < result.synsets[synsetCount].terms.length; termCount++) {
                    var termObj = result.synsets[synsetCount].terms[termCount];
                    synonyms += termObj.term
                    if (termObj.level) {
                        synonyms += " (" + termObj.level + ")";
                    }
                    synonyms += ", "
                }
                synonyms += "<br/><br/>";
            }
            element = document.getElementById("resultOutput");
            if(element != undefined){
                element.innerHTML = synonyms;
            }else{
                console.log("Can't find the div-box, but here is the result:")
                console.log(synonyms)
            }
        }

        Synonym = Polymer({
            word : "",
            resultSynonyme: "",
            search: function(){
                this.$.ajax.url = "https://www.openthesaurus.de/synonyme/search?q="+this.word+"&format=application/json&callback=handleResponse";
            }
        });
    </script>
</polymer-element>

<polymer-element name="synonym-list-onetime" attributes="word">
    <template>
        <style>
            #syno_style{
                background-color: lightpink;
            }
        </style>

        <div id="syno_style">
            <h3>Synonyme</h3>
            <div id="resultOutput">(Chrome)Siehe Console!</div>
            <core-shared-lib
                    id="ajax"
                    auto
                    url = "https://www.openthesaurus.de/synonyme/search?q={{word}}&format=application/json&callback=handleResponse"
                    callbackName = this.handleResponse>
            </core-shared-lib>
        </div>
    </template>
    <script>
        function handleResponse(result){
            var synonyms = "";
            for (var synsetCount = 0; synsetCount < result.synsets.length; synsetCount++) {
                for (var termCount = 0; termCount < result.synsets[synsetCount].terms.length; termCount++) {
                    var termObj = result.synsets[synsetCount].terms[termCount];
                    synonyms += termObj.term
                    if (termObj.level) {
                        synonyms += " (" + termObj.level + ")";
                    }
                    synonyms += ", "
                }
                synonyms += "<br/><br/>";
            }
            element = document.getElementById("resultOutput");
            if(element != undefined){
                element.innerHTML = synonyms;
            }else{
                console.log("Can't find the div-box, but here is the result:")
                console.log(synonyms)
            }
        }

        Synonym = Polymer({
            word : ""
        });
    </script>
</polymer-element>