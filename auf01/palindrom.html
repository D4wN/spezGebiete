<template>


    <!--<output id="rev"  disabled/>
    <!--<input type="text" id="txtfield">
    <button id="btn">Send</button>-->
    <style></style>

</template>


<script>
    var thatDoc = document;
    var thisDoc = (thatDoc._currentScript || thatDoc.currentScript).ownerDocument;

    var PalProto = Object.create(HTMLElement.prototype);

    PalProto.createdCallback = function () {

        var shadowRoot = this.createShadowRoot();
        var template = thisDoc.querySelector('template').content;

        var clone = thatDoc.importNode(template, true);


        shadowRoot.appendChild(clone);

        PalProto.txtfield = shadowRoot.getElementById("txtfield");
        //this.btn = shadowRoot.getElementById("btn");
        this.rev =shadowRoot.getElementById("rev");

        var val = document.getElementsByTagName("palindrom-check");
        //var test = val;
        console.log(val.length)
        for (var i = 0; i < val.length; i++){
            //console.log(val[i].innerHTML);
            checkString(val[i].innerHTML,this.rev, this.isPal);
        }

        /*
        this.btn.addEventListener("click",function (e){
            checkString(PalProto.txtfield.value, this.rev);
        });

        this.txtfield.onkeypress = function (e) {
            if(e.keyCode == 13) {
                checkString(PalProto.txtfield.value, this.rev);
            }
        }*/

    };

    function checkString(texte, field){
        //console.log("checke " + texte);
        var wordlength = texte.length;
        //console.log(wordlength);
        if(wordlength >0){
            var reverseWord = "";
            for(var i = wordlength; i >= 0; i--){
                reverseWord += texte.charAt(i);
            }

            field.value += reverseWord + checkPalindrom(texte.toLowerCase(), reverseWord.toLowerCase()) + " ";
            field.innerHtml += "'</br>'";

            //checkPalindrom(texte, reverseWord, isPal);
        }
    }

    function checkPalindrom(orig, rev){
        console.log("checke " + orig + " " + rev);
        var bool = false;
        for(var i = 0; i <= orig.length; i++){
                if(orig.charAt(i) == rev.charAt(i)) {
                    bool = true;
                } else{
                    bool = false;
                    break;
                }

        }

        if(bool){
            return " ist ein Palindrom";
        } else return " ist kein Palindrom"
    }

    var palindrom = thisDoc.registerElement('palindrom-check', {prototype: PalProto});
</script>